<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Journey Plan</title>
    <link rel="stylesheet" href="template-style.css" />
     <link rel="icon" href="/128x128@2x.png" type="image/x-icon" />
  </head>
  <body>
    <div class="page">
      <p class="Journey-Plan-Number"></p>

      <p class="Departure-Date"></p>
      <p class="Vehicle-Number"></p>
      <p class="Driver-Name"></p>
      <p class="Driver-Name"></p>

      <p class="Passengers-1"><span>1.</span> <span></span></p>
      <p class="Passengers-2"><span>2.</span> <span></span></p>
      <p class="Passengers-3"><span>3.</span> <span></span></p>

      <p class="Call-Journey-Manager">97969572</p>

      <p class="Route-Place-Name-1"></p>
      <p class="Route-Place-Name-2"></p>
      <p class="Route-Place-Name-3"></p>
      <p class="Route-Place-Name-4"></p>
      <p class="Route-Place-Name-5"></p>
      <p class="Route-Place-Name-6"></p>
      <p class="Route-Place-Name-7"></p>
      <p class="Route-Place-Name-8"></p>
      <p class="Route-Place-Name-9"></p>
      <p class="Route-Place-Name-10"></p>

      <p class="Time-Arrive-Time-Depart-1">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-2">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-3">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-4">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-5">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-6">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-7">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-8">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-9">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>
      <p class="Time-Arrive-Time-Depart-10">
        <span class="time-arrive"></span><span class="time-separator"></span
        ><span class="time-depart"></span>
      </p>

      <p class="Rest-Tick-1"></p>
      <p class="Rest-Tick-2"></p>
      <p class="Rest-Tick-3"></p>
      <p class="Rest-Tick-4"></p>
      <p class="Rest-Tick-5"></p>
      <p class="Rest-Tick-6"></p>
      <p class="Rest-Tick-7"></p>
      <p class="Rest-Tick-8"></p>
      <p class="Rest-Tick-9"></p>
      <p class="Rest-Tick-10"></p>

      <img class="img-right-1" src="./right.png" alt="" />
      <img class="img-right-2" src="./right.png" alt="" />
      <img class="img-right-3" src="./right.png" alt="" />

      <img class="signature" src="signature.png" alt="" />

      <img class="Signature-with-name" src="Signature with name.png" alt="" />
      <p class="Signature-date"></p>
    </div>
    <div class="button-download">
      <button type="button" onclick="window.print()">
        üñ®Ô∏è Print / Download PDF
      </button>
    </div>
  </body>
  <script>
    // ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ localStorage ŸàŸÖŸÑÿ° ÿßŸÑÿµŸÅÿ≠ÿ©
    (function () {
      const dataStr = localStorage.getItem("journeyPlanPrintData");

      if (!dataStr) {
        console.log("No print data found");
        return;
      }

      try {
        const data = JSON.parse(dataStr);

        // ŸÖŸÑÿ° ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        const jpNum = document.querySelector(".Journey-Plan-Number");
        if (jpNum) jpNum.textContent = data.journeyPlanNumber;

        const depDate = document.querySelector(".Departure-Date");
        if (depDate) depDate.textContent = data.departureDate;

        const vehNum = document.querySelector(".Vehicle-Number");
        if (vehNum) vehNum.textContent = data.vehicleNumber;

        const driverNames = document.querySelectorAll(".Driver-Name");
        driverNames.forEach((el) => (el.textContent = data.driverName));

        const callMgr = document.querySelector(".Call-Journey-Manager");
        if (callMgr) callMgr.textContent = data.callManager;

        const sigDate = document.querySelector(".Signature-date");
        if (sigDate) sigDate.textContent = data.signatureDate;

        // ÿßŸÑÿ±ŸÉÿßÿ®
        data.passengers.forEach((passengerHTML, index) => {
          const passenger = document.querySelector(`.Passengers-${index + 1}`);
          if (passenger) passenger.innerHTML = passengerHTML;
        });

        // ÿßŸÑŸÖÿ≥ÿßÿ±ÿßÿ™
        data.routes.forEach((route, index) => {
          const routeEl = document.querySelector(
            `.Route-Place-Name-${index + 1}`
          );
          if (routeEl) routeEl.textContent = route;
        });

        // ÿßŸÑÿ£ŸàŸÇÿßÿ™
        data.times.forEach((time, index) => {
          const timeEl = document.querySelector(
            `.Time-Arrive-Time-Depart-${index + 1}`
          );
          if (timeEl) timeEl.innerHTML = time;
        });

        // ÿßŸÑÿ±ÿßÿ≠ÿ©
        data.rests.forEach((rest, index) => {
          const restEl = document.querySelector(`.Rest-Tick-${index + 1}`);
          if (restEl) restEl.textContent = rest;
        });

        // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßÿ™ŸÖŸÑÿ™ ÿ®ŸÜÿ¨ÿßÿ≠
        console.log("Journey plan data loaded successfully");

        // ŸÖÿ≥ÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ localStorage ÿ®ÿπÿØ ÿ¥ŸàŸäÿ©
        setTimeout(() => {
          localStorage.removeItem("journeyPlanPrintData");
        }, 2000);
      } catch (error) {
        console.error("Error loading print data:", error);
      }
    })();
  </script>
</html>
